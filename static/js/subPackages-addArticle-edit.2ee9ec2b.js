(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["subPackages-addArticle-edit"],{"17a3":function(t,e,a){"use strict";a.r(e);var i=a("519c"),n=a("805a");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("fc1a");var s=a("f0c5"),l=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"0be47fce",null,!1,i["a"],void 0);e["default"]=l.exports},"1a59":function(t,e,a){"use strict";a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("2909"));a("a9e3"),a("14d9"),a("d3b7"),a("159b"),a("caad"),a("2532"),a("7db0"),a("99af"),a("e9c4"),a("c975"),a("4de4"),a("d81d");var o=i(a("e0656")),s={name:"uniDataChecklist",mixins:[o.default],props:{mode:{type:String,default:"default"},multiple:{type:Boolean,default:!1},value:{type:[Array,String,Number],default:function(){return""}},otherValue:{type:[Array,String,Number],default:function(){return""}},extData:{type:String,default:function(){return""}},localdata:{type:Array,default:function(){return[]}},min:{type:[Number,String],default:""},max:{type:[Number,String],default:""},wrap:{type:Boolean,default:!0},icon:{type:String,default:"left"},selectedColor:{type:String,default:""},selectedTextColor:{type:String,default:""},options:{type:[Object,Array],default:function(){return{}}},collection:{type:String,default:""},action:{type:String,default:""},field:{type:String,default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},orderby:{type:String,default:""},where:{type:[String,Object],default:""},getone:{type:[Boolean,String],default:!1},manual:{type:Boolean,default:!1},disabled:{type:[String,Boolean],default:!1},placeholder:{type:String,default:"请选择"},defaultResult:{type:String,default:"请选择"}},watch:{localdata:{handler:function(t){this.range=t,this.dataList=this.getDataList(this.getSelectedValue(t)),this.loading=!1},deep:!0},listData:function(t){this.range=t,this.dataList=this.getDataList(this.getSelectedValue(t)),this.loading=!1},value:function(t){console.log("watch value",t),this.dataList=this.getDataList(t),this.formItem&&this.formItem.setValue(t)},otherValue:function(t){this.otherText=t},defaultResult:function(t){this.result=t}},data:function(){return{active:!1,loading:!0,other:!1,otherText:"",otherPlaceholder:"",dataList:[],range:[],contentText:{contentdown:"查看更多",contentrefresh:"加载中",contentnomore:"没有更多"},result:"",styles:{selectedColor:"#007aff",selectedTextColor:"#333"}}},created:function(){this.form=this.getForm("uniForms"),this.formItem=this.getForm("uniFormsItem"),this.formItem&&this.formItem.setValue(this.value),this.styles={selectedColor:this.selectedColor,selectedTextColor:this.selectedTextColor},this.otherText=this.otherValue,this.formItem&&this.formItem.name&&(this.rename=this.formItem.name,this.form.inputChildrens.push(this)),console.log("this value",this.value),this.localdata&&0!==this.localdata.length?(this.range=this.localdata,this.loading=!1,this.dataList=this.getDataList(this.getSelectedValue(this.range))):this.collection&&(this.loading=!1,this.loadData()),this.placeholder&&(this.otherPlaceholder=this.placeholder),this.defaultResult&&!this.result&&(this.result=this.defaultResult,console.log("this.defaultResult",this.defaultResult))},methods:{init:function(t){},getForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uniForms",e=this.$parent,a=e.$options.name;while(a!==t){if(e=e.$parent,!e)return!1;a=e.$options.name}return e},chagne:function(t){var e=t.detail.value,a={value:[],data:[]};if(this.multiple)this.range.forEach((function(t){e.includes(t.value+"")&&(a.value.push(t.value),a.data.push(t))}));else{var i=this.range.find((function(t){return t.value+""===e}));i&&(a={value:i.value,data:i},this.active=!1)}this.formItem&&this.formItem.setValue(a.value),console.log("change",a),a.data&&a.data.is_other?(console.log("get other",this.otherText),this.changeOtherText(this.otherText)):this.changeOtherText(!1),this.$emit("input",a.value),this.$emit("change",{detail:a}),this.multiple?this.dataList=this.getDataList(a.value,!0):this.dataList=this.getDataList(a.value)},getLabelClass:function(t,e){var a,i,o=[];switch(this.mode){case"default":t.disabled&&o.push("disabled-cursor");break;case"button":(a=o).push.apply(a,["is-button"].concat((0,n.default)(this.getClasses(t,"button"))));break;case"list":this.multiple?o.push("is-list-multiple-box"):o.push("is-list-box"),t.disabled&&o.push("is-list-disabled"),0!==e&&o.push("is-list-border");break;case"tag":(i=o).push.apply(i,["is-tag"].concat((0,n.default)(this.getClasses(t,"tag"))));break}return o=o.join(" "),o},getCheckboxClass:function(t){var e,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=[];this.multiple?(e=o).push.apply(e,(0,n.default)(this.getClasses(t,"default-multiple",i))):(a=o).push.apply(a,(0,n.default)(this.getClasses(t,"default",i)));return o=o.join(" "),o},getTextClass:function(t){var e,a,i,o,s=[];switch(this.mode){case"default":(e=s).push.apply(e,(0,n.default)(this.getClasses(t,"list")));break;case"button":(a=s).push.apply(a,(0,n.default)(this.getClasses(t,"list")));break;case"list":(i=s).push.apply(i,(0,n.default)(this.getClasses(t,"list")));break;case"tag":(o=s).push.apply(o,["is-tag-text"].concat((0,n.default)(this.getClasses(t,"tag-text"))));break}return s=s.join(" "),s},getDataList:function(t){var e=this,a=JSON.parse(JSON.stringify(this.range)),i=[];return this.multiple&&(Array.isArray(t)||(t=[])),console.log("getDataList"),this.other=!1,a.forEach((function(a,n){if(a.disabled=a.disable||a.disabled||e.disabled||!1,e.multiple)if(t.length>0){var o=t.find((function(t){return t===a.value}));a.selected=void 0!==o}else a.selected=!1;else a.selected=t===a.value;a.is_other&&(e.placeholder||(e.otherPlaceholder="请输入其他"+(a.memo?a.memo:"")),a.selected&&(e.other=!0)),e.extData&&a.ext_fields&&a.ext_fields.indexOf(e.extData)>-1?console.log("被排除了",a):i.push(a)})),this.setRange(i)},setRange:function(t){var e=this,a=t.filter((function(t){return t.selected})),i=Number(this.min)||0,n=Number(this.max)||"";return t.forEach((function(o,s){if(e.multiple){if(a.length<=i){var l=a.find((function(t){return t.value===o.value}));void 0!==l&&(o.disabled=!0)}if(a.length>=n&&""!==n){var r=a.find((function(t){return t.value===o.value}));void 0===r&&(o.disabled=!0)}}e.setClass(o,s),t[s]=o})),this.result=a.map((function(t){return t.text})).join("、"),console.log("set result",this.result),t},setClass:function(t,e){t.labelClass=this.getLabelClass(t,e),t.checkboxBgClass=this.getCheckboxClass(t,"-bg"),t.checkboxClass=this.getCheckboxClass(t),t.textClass=this.getTextClass(t),t.listClass=this.getCheckboxClass(t,"-list"),t.styleBackgroud=this.setStyleBackgroud(t),t.styleIcon=this.setStyleIcon(t),t.styleIconText=this.setStyleIconText(t),t.styleRightIcon=this.setStyleRightIcon(t)},getClasses:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=[];return t.disabled&&i.push("is-"+e+"-disabled"+a),t.selected&&i.push("is-"+e+"-checked"+a),"button"===this.mode&&"button"!==e||t.selected&&t.disabled&&i.push("is-"+e+"-disabled-checked"+a),i},getSelectedValue:function(t){if(!this.multiple)return this.value;var e=[];return t.forEach((function(t){t.selected&&e.push(t.value)})),this.value.length>0?this.value:e},setStyleBackgroud:function(t){var e={};return t.selected&&("list"!==this.mode&&(e.borderColor=this.styles.selectedColor),"tag"===this.mode&&(e.backgroundColor=this.styles.selectedColor)),e},setStyleIcon:function(t){var e={};return t.selected&&(e.backgroundColor=this.styles.selectedColor,e.borderColor=this.styles.selectedColor),e},setStyleIconText:function(t){var e={};return t.selected&&(this.styles.selectedTextColor?e.color=this.styles.selectedTextColor:"tag"===this.mode?e.color="#fff":e.color=this.styles.selectedColor),e},setStyleRightIcon:function(t){var e={};return t.selected&&"list"===this.mode&&(e.borderColor=this.styles.selectedColor),e},changeOther:function(){console.log("changeOther",{value:this.otherText}),this.changeOtherText(this.otherText)},changeOtherText:function(t){this.formItem&&this.formItem.name&&(t?this.form.formData[this.formItem.name+"_other"]=t:delete this.form.formData[this.formItem.name+"_other"],console.log(this.formItem.name+"_other",t),console.log(this.form.formData)),t&&this.$emit("otherInput",t)},activeChange:function(t){var e=this;setTimeout((function(){e.active=t}),100)}}};e.default=s},"1fb8":function(t,e,a){var i=a("eab6");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("76a0d011",i,!0,{sourceMap:!1,shadowMode:!1})},"3c9c":function(t,e,a){"use strict";a.r(e);var i=a("a365"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},4111:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";.uni-data-checklist[data-v-0be47fce]{position:relative\n  /* min-height: 36px; */}.uni-data-loading[data-v-0be47fce]{display:flex;align-items:center;\n  /* justify-content: center; */height:36px;padding-left:10px}.checklist-group[data-v-0be47fce]{display:flex;flex-direction:row;flex-wrap:wrap}.checklist-box[data-v-0be47fce]{display:flex;flex-direction:row;align-items:center;margin:9px 0;margin-right:25px}.checklist-text[data-v-0be47fce]{font-size:14px;color:#333;margin-left:5px;transition:color .2s}.is-button[data-v-0be47fce]{margin-right:10px;padding:3px 15px;border:1px #dcdfe6 solid;border-radius:3px;transition:border-color .2s}.is-list[data-v-0be47fce]{flex-direction:column}.is-list-box[data-v-0be47fce]{display:flex;padding:10px 15px;padding-left:0;margin:0}.checklist-content[data-v-0be47fce]{display:flex;flex:1;flex-direction:row;align-items:center;justify-content:space-between}.list-content[data-v-0be47fce]{margin-left:5px}.is-list-multiple-box[data-v-0be47fce]{display:flex;padding:10px 15px;padding-left:0;margin:0}.is-list-border[data-v-0be47fce]{border-top:1px #eee solid}.is-tag[data-v-0be47fce]{margin-right:10px;padding:3px 10px;border:1px #eee solid;border-radius:3px;background-color:#f5f5f5\n  /* transition: border-color 0.1s; */}.is-tag-text[data-v-0be47fce]{margin:0;color:#666}.checkbox__inner[data-v-0be47fce]{flex-shrink:0;position:relative;border:1px solid #dcdfe6;border-radius:2px;box-sizing:border-box;width:16px;height:16px;background-color:#fff;z-index:1;transition:border-color .1s}.checkbox__inner-icon[data-v-0be47fce]{border:1px solid #fff;border-left:0;border-top:0;height:8px;left:5px;position:absolute;top:1px;width:3px;opacity:0;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;-webkit-transform-origin:center;transform-origin:center;-webkit-transform:rotate(40deg) scaleY(.4);transform:rotate(40deg) scaleY(.4)}.radio__inner[data-v-0be47fce]{flex-shrink:0;display:flex;justify-content:center;align-items:center;position:relative;border:1px solid #dcdfe6;border-radius:2px;box-sizing:border-box;width:16px;height:16px;border-radius:16px;background-color:#fff;z-index:1;transition:border-color .3s}.radio__inner-icon[data-v-0be47fce]{width:8px;height:8px;border-radius:10px;opacity:0;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s}.checkobx__list[data-v-0be47fce]{border:1px solid #fff;border-left:0;border-top:0;height:12px;width:6px;-webkit-transform-origin:center;transform-origin:center;opacity:0;transition:all .3s;-webkit-transform:rotate(45deg);transform:rotate(45deg)}\n/* 禁用样式 */.is-default-disabled-bg[data-v-0be47fce]{background-color:#f2f6fc;border-color:#dcdfe6;cursor:not-allowed}.is-default-multiple-disabled-bg[data-v-0be47fce]{background-color:#f2f6fc;border-color:#dcdfe6;cursor:not-allowed}.is-default-disabled[data-v-0be47fce]{border-color:#f2f6fc}.is-default-multiple-disabled[data-v-0be47fce]{border-color:#f2f6fc}.is-list-disabled[data-v-0be47fce]{cursor:not-allowed;color:#999}.is-list-disabled-checked[data-v-0be47fce]{color:#a1dcc1}.is-button-disabled[data-v-0be47fce]{cursor:not-allowed;border-color:#ebeef5}.is-button-text-disabled[data-v-0be47fce]{color:#c0c4cc}.is-button-disabled-checked[data-v-0be47fce]{border-color:#a1dcc1}.is-tag-disabled[data-v-0be47fce]{cursor:not-allowed;border-color:#e9e9eb;background-color:#f4f4f5}.is-tag-text-disabled[data-v-0be47fce]{color:#bcbec2}\n/* 选中样式 */.is-default-checked-bg[data-v-0be47fce]{border-color:#007aff}.is-default-multiple-checked-bg[data-v-0be47fce]{border-color:#007aff;background-color:#007aff}.is-default-checked[data-v-0be47fce]{opacity:1;background-color:#007aff;-webkit-transform:rotate(45deg) scaleY(1);transform:rotate(45deg) scaleY(1)}.is-default-multiple-checked[data-v-0be47fce]{opacity:1;-webkit-transform:rotate(45deg) scaleY(1);transform:rotate(45deg) scaleY(1)}.is-default-disabled-checked-bg[data-v-0be47fce]{opacity:.4}.is-default-multiple-disabled-checked-bg[data-v-0be47fce]{opacity:.4}.is-default-checked-list[data-v-0be47fce]{border-color:#007aff;opacity:1;-webkit-transform:rotate(45deg) scaleY(1);transform:rotate(45deg) scaleY(1)}.is-default-multiple-checked-list[data-v-0be47fce]{border-color:#007aff;opacity:1;-webkit-transform:rotate(45deg) scaleY(1);transform:rotate(45deg) scaleY(1)}.is-list-disabled-checked[data-v-0be47fce]{opacity:.4}.is-default-disabled-checked-list[data-v-0be47fce]{opacity:.4}.is-default-multiple-disabled-checked-list[data-v-0be47fce]{opacity:.4}.is-button-checked[data-v-0be47fce]{border-color:#007aff}.is-button-disabled-checked[data-v-0be47fce]{opacity:.4}.is-list-checked[data-v-0be47fce]{color:#007aff}.is-tag-checked[data-v-0be47fce]{border-color:#007aff;background-color:#007aff}.is-tag-text-checked[data-v-0be47fce]{color:#fff}.is-tag-disabled-checked[data-v-0be47fce]{opacity:.4}.disabled-cursor[data-v-0be47fce]{cursor:not-allowed}.is-wrap[data-v-0be47fce]{flex-direction:column}.uni-easyinput[data-v-0be47fce]{width:100%;flex:1;position:relative;text-align:left;color:#333;font-size:14px}.uni-easyinput__content[data-v-0be47fce]{flex:1;width:100%;display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:36px}.uni-easyinput__content-input[data-v-0be47fce]{position:relative;overflow:hidden;flex:1;width:auto;line-height:2;font-size:14px}.is-textarea[data-v-0be47fce]{align-items:flex-start}.is-textarea-icon[data-v-0be47fce]{margin-top:5px}.uni-easyinput__content-textarea[data-v-0be47fce]{position:relative;overflow:hidden;flex:1;width:auto;line-height:1.5;font-size:14px;padding-top:6px;padding-bottom:10px;min-height:80px;height:80px}.input-padding[data-v-0be47fce]{padding-left:10px}.content-clear-icon[data-v-0be47fce]{padding:0 5px}.label-icon[data-v-0be47fce]{margin-right:5px;margin-top:-1px}.is-input-border[data-v-0be47fce]{display:flex;flex-direction:row;align-items:center;border:1px solid #e4e7ed;border-radius:4px;box-sizing:border-box}.is-required[data-v-0be47fce]{color:#dd524d}.uni-error-message[data-v-0be47fce]{position:absolute;bottom:-17px;left:0;line-height:12px;color:#dd524d;font-size:12px;text-align:left}.uni-error-msg--boeder[data-v-0be47fce]{position:relative;bottom:0;line-height:22px}.is-input-error-border[data-v-0be47fce]{border-color:#dd524d}.uni-easyinput--border[data-v-0be47fce]{margin-bottom:0;padding:10px 15px;border-top:1px #eee solid}.uni-easyinput-error[data-v-0be47fce]{padding-bottom:0}.is-first-border[data-v-0be47fce]{border:none}.is-disabled[data-v-0be47fce]{background-color:#eee}.more-list[data-v-0be47fce]{border-radius:8px;padding:%?10?% %?30?%;width:%?500?%;background-color:#fff;position:absolute;z-index:999;border:1px solid #ebebeb;max-height:%?620?%;min-height:%?100?%}.uni-datetime-picker-mask[data-v-0be47fce]{position:fixed;bottom:0;top:0;left:0;right:0;background-color:initial;transition-duration:.3s;z-index:998}',""]),t.exports=e},"519c":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uniForms:a("505a").default,uniLoadMore:a("253b").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-data-checklist"},[a("uni-forms",{ref:"form"},[a("v-uni-view",{staticClass:"uni-easyinput",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.activeChange(!0)}}},[a("v-uni-view",{staticClass:"uni-easyinput__content is-input-border",staticStyle:{"padding-left":"20rpx"}},[t.result?a("v-uni-text",[t._v(t._s(t.result))]):a("v-uni-text",[t._v(t._s(t.placeholder))])],1)],1)],1),t.active?a("v-uni-view",{staticClass:"uni-datetime-picker-mask",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.activeChange(!1)}}}):t._e(),t.active?[t.loading?[a("v-uni-view",{staticClass:"uni-data-loading"},[a("uni-load-more",{attrs:{status:"loading",iconType:"snow",iconSize:18,"content-text":t.contentText}})],1)]:[a("v-uni-scroll-view",{staticClass:"more-list",attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[a("v-uni-view",[t.multiple?a("v-uni-checkbox-group",{staticClass:"checklist-group",class:{"is-list":"list"===t.mode,"is-wrap":t.wrap},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.chagne.apply(void 0,arguments)}}},[t._l(t.dataList,(function(e,i){return a("v-uni-label",{key:i,staticClass:"checklist-box",class:e.labelClass,style:[e.styleBackgroud]},[a("v-uni-checkbox",{staticClass:"hidden",attrs:{hidden:!0,disabled:!!e.disabled,value:e.value+"",checked:e.selected}}),"tag"!==t.mode&&"list"!==t.mode||"list"===t.mode&&"left"===t.icon?a("v-uni-view",{staticClass:"checkbox__inner",class:e.checkboxBgClass,style:[e.styleIcon]},[a("v-uni-view",{staticClass:"checkbox__inner-icon",class:e.checkboxClass})],1):t._e(),a("v-uni-view",{staticClass:"checklist-content",class:{"list-content":"list"===t.mode&&"left"===t.icon}},[a("v-uni-text",{staticClass:"checklist-text",class:e.textClass,style:[e.styleIconText]},[t._v(t._s(e.text))]),"list"===t.mode&&"right"===t.icon?a("v-uni-view",{staticClass:"checkobx__list",class:e.listClass,style:[e.styleBackgroud]}):t._e()],1)],1)})),t.other?a("v-uni-view",{},[a("v-uni-view",{staticClass:"uni-easyinput"},[a("v-uni-view",{staticClass:"uni-easyinput__content is-input-border"},[a("v-uni-input",{staticClass:"uni-easyinput__content-input",staticStyle:{"padding-left":"10px"},attrs:{type:"text",placeholder:t.otherPlaceholder},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.changeOther.apply(void 0,arguments)}},model:{value:t.otherText,callback:function(e){t.otherText=e},expression:"otherText"}})],1)],1)],1):t._e()],2):a("v-uni-radio-group",{staticClass:"checklist-group",class:{"is-list":"list"===t.mode,"is-wrap":t.wrap},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.chagne.apply(void 0,arguments)}}},[t._l(t.dataList,(function(e,i){return a("v-uni-label",{key:i,staticClass:"checklist-box",class:e.labelClass,style:[e.styleBackgroud]},[a("v-uni-radio",{attrs:{hidden:!0,disabled:e.disabled,value:e.value+"",checked:e.selected}}),"tag"!==t.mode&&"list"!==t.mode||"list"===t.mode&&"left"===t.icon?a("v-uni-view",{staticClass:"radio__inner",class:e.checkboxBgClass,style:[e.styleBackgroud]},[a("v-uni-view",{staticClass:"radio__inner-icon",class:e.checkboxClass,style:[e.styleIcon]})],1):t._e(),a("v-uni-view",{staticClass:"checklist-content",class:{"list-content":"list"===t.mode&&"left"===t.icon}},[a("v-uni-text",{staticClass:"checklist-text",class:e.textClass,style:[e.styleIconText]},[t._v(t._s(e.text))]),"list"===t.mode&&"right"===t.icon?a("v-uni-view",{staticClass:"checkobx__list",class:e.listClass,style:[e.styleRightIcon]}):t._e()],1)],1)})),t.other?a("v-uni-view",{},[a("v-uni-view",{staticClass:"uni-easyinput"},[a("v-uni-view",{staticClass:"uni-easyinput__content is-input-border"},[a("v-uni-input",{staticClass:"uni-easyinput__content-input",staticStyle:{"padding-left":"10px"},attrs:{type:"text",placeholder:t.otherPlaceholder},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.changeOther.apply(void 0,arguments)}},model:{value:t.otherText,callback:function(e){t.otherText=e},expression:"otherText"}})],1)],1)],1):t._e()],2)],1)],1)]]:t._e()],2)},o=[]},"551f":function(t,e,a){"use strict";(function(t){a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530"));a("caad"),a("2532"),a("d3b7");var o=i(a("9962")),s=i(a("92df")),l=t.database();l.command;function r(t){var e={};for(var a in o.default)t.includes(a)&&(e[a]=o.default[a]);return e}var c={components:{Tinymce:s.default},data:function(){return{formData:{user_id:"",category_id:"",title:"",content:"",excerpt:"",source_from:"",article_status:null,view_count:null,like_count:null,is_sticky:null,is_essence:null,comment_status:null,comment_count:null,last_comment_user_id:"",avatar:"",publish_date:null,publish_ip:"",last_modify_date:null,last_modify_ip:"",mode:null},formOptions:{status:[{value:1,text:"是"},{value:0,text:"否"}],checks:[{value:1,text:"是"},{value:0,text:"否"}]},rules:(0,n.default)({},r(["user_id","title","content","excerpt","article_status","comment_status","last_comment_user_id","avatar","publish_date","last_modify_date","last_modify_ip","mode","category_id","comment_count","is_essence","is_sticky","view_count","like_count","publish_ip"]))}},onLoad:function(t){var e=t.id;this.formDataId=e,this.getDetail(e)},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{submit:function(){var t=this;uni.showLoading({mask:!0}),console.log("this.formdata",this.formData),this.$refs.form.validate().then((function(e){e.last_modify_date=Date.now(),e.last_modify_ip=l.env.clientIP,t.submitForm(e)})).catch((function(t){uni.hideLoading()}))},submitForm:function(t){var e=this;l.collection("opendb-news-articles").doc(this.formDataId).update(t).then((function(t){uni.showToast({title:"修改成功"}),e.getOpenerEventChannel().emit("refreshData"),setTimeout((function(){return uni.navigateBack()}),500)})).catch((function(t){uni.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))},getDetail:function(t){var e=this;uni.showLoading({mask:!0}),l.collection("opendb-news-articles").doc(t).field("user_id,title,content,excerpt,article_status,comment_status,last_comment_user_id,avatar,publish_date,last_modify_date,mode,category_id,comment_count,is_essence,is_sticky,view_count,like_count").get().then((function(t){var a=t.result.data[0];a&&(e.formData=a)})).catch((function(t){uni.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((function(){uni.hideLoading()}))}}};e.default=c}).call(this,a("a9ff")["default"])},5652:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uniForms:a("505a").default,uniFormsItem:a("584f").default,uniEasyinput:a("2127").default,cloudImage:a("f724").default,uniDataCheckbox:a("3a39").default,cloudUserSelect:a("aa66").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-container"},[a("uni-forms",{ref:"form",attrs:{validateTrigger:"bind"},model:{value:t.formData,callback:function(e){t.formData=e},expression:"formData"}},[a("uni-forms-item",{attrs:{name:"title",label:"标题"}},[a("uni-easyinput",{attrs:{placeholder:"标题"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("uni-forms-item",{attrs:{name:"avatar",label:"封面大图"}},[a("cloud-image",{attrs:{placeholder:"缩略图地址"},model:{value:t.formData.avatar,callback:function(e){t.$set(t.formData,"avatar",e)},expression:"formData.avatar"}})],1),a("uni-forms-item",{attrs:{name:"category_id",label:"分类"}},[a("uni-data-checkbox",{attrs:{collection:"opendb-news-categories",field:"name as text, _id as value"},model:{value:t.formData.category_id,callback:function(e){t.$set(t.formData,"category_id",e)},expression:"formData.category_id"}})],1),a("uni-forms-item",{attrs:{name:"excerpt",label:"摘要"}},[a("uni-easyinput",{attrs:{placeholder:"文章摘录"},model:{value:t.formData.excerpt,callback:function(e){t.$set(t.formData,"excerpt",e)},expression:"formData.excerpt"}})],1),t.formData.content?a("uni-forms-item",{attrs:{name:"content",label:"文章内容"}},[a("Tinymce",{ref:"editor",attrs:{width:860,height:400},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1):t._e(),a("uni-forms-item",{attrs:{name:"user_id",label:"上传用户"}},[a("cloud-user-select",{attrs:{condition:"nickname!=null"},model:{value:t.formData.user_id,callback:function(e){t.$set(t.formData,"user_id",e)},expression:"formData.user_id"}})],1),a("uni-forms-item",{attrs:{name:"source_from",label:"来源"}},[a("uni-easyinput",{attrs:{placeholder:"请输入完整来源信息"},model:{value:t.formData.source_from,callback:function(e){t.$set(t.formData,"source_from",e)},expression:"formData.source_from"}})],1),a("uni-forms-item",{attrs:{name:"mode",label:"显示模式"}},[a("uni-easyinput",{attrs:{placeholder:"显示模式",type:"number"},model:{value:t.formData.mode,callback:function(e){t.$set(t.formData,"mode",e)},expression:"formData.mode"}})],1),a("uni-forms-item",{attrs:{name:"view_count",label:"阅读数量"}},[a("uni-easyinput",{attrs:{placeholder:"阅读数量",type:"number"},model:{value:t.formData.view_count,callback:function(e){t.$set(t.formData,"view_count",e)},expression:"formData.view_count"}})],1),a("uni-forms-item",{attrs:{name:"like_count",label:"点赞数"}},[a("uni-easyinput",{attrs:{placeholder:"喜欢数、点赞数",type:"number"},model:{value:t.formData.like_count,callback:function(e){t.$set(t.formData,"like_count",e)},expression:"formData.like_count"}})],1),a("uni-forms-item",{attrs:{name:"comment_count",label:"评论数"}},[a("uni-easyinput",{attrs:{placeholder:"评论数",type:"number"},model:{value:t.formData.comment_count,callback:function(e){t.$set(t.formData,"comment_count",e)},expression:"formData.comment_count"}})],1),a("uni-forms-item",{attrs:{name:"article_status",label:"发布"}},[a("uni-data-checkbox",{attrs:{localdata:t.formOptions.status},model:{value:t.formData.article_status,callback:function(e){t.$set(t.formData,"article_status",e)},expression:"formData.article_status"}})],1),a("uni-forms-item",{attrs:{name:"is_sticky",label:"是否置顶"}},[a("uni-data-checkbox",{attrs:{localdata:t.formOptions.checks},model:{value:t.formData.is_sticky,callback:function(e){t.$set(t.formData,"is_sticky",e)},expression:"formData.is_sticky"}})],1),a("uni-forms-item",{attrs:{name:"is_essence",label:"是否加精"}},[a("uni-data-checkbox",{attrs:{localdata:t.formOptions.checks},model:{value:t.formData.is_essence,callback:function(e){t.$set(t.formData,"is_essence",e)},expression:"formData.is_essence"}})],1),a("uni-forms-item",{attrs:{name:"comment_status",label:"开放评论"}},[a("uni-data-checkbox",{attrs:{localdata:t.formOptions.status},model:{value:t.formData.comment_status,callback:function(e){t.$set(t.formData,"comment_status",e)},expression:"formData.comment_status"}})],1),a("v-uni-view",{staticClass:"uni-button-group"},[a("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("提交")]),a("v-uni-navigator",{staticStyle:{"margin-left":"15px"},attrs:{"open-type":"navigateBack"}},[a("v-uni-button",{staticClass:"uni-button",staticStyle:{width:"100px"}},[t._v("返回")])],1)],1)],1)],1)},o=[]},"805a":function(t,e,a){"use strict";a.r(e);var i=a("1a59"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"972a":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={cloudSelect:a("17a3").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("cloud-select",{attrs:{defaultResult:t.nickname,collection:"uni-id-users",where:t.condition?t.condition:"",field:"_id as value, nickname as text",pageSize:50},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}},model:{value:t.uid,callback:function(e){t.uid=e},expression:"uid"}})],1)},o=[]},"9a34":function(t,e,a){"use strict";a.r(e);var i=a("551f"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},a365:function(t,e,a){"use strict";(function(t){a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var i={data:function(){return{uid:"",nickname:""}},watch:{uid:function(t){this.value!=t&&(console.log("watch uid",t),this.$emit("input",t))},value:function(t){console.log("watch value",t),this.uid=this.value,this.loadData()}},props:{value:{type:[Array,String,Number],default:function(){return""}},condition:{type:String,default:""}},created:function(){this.uid=this.value,console.log("created",this.uid)},methods:{change:function(t){console.log("change user",t),t&&t.data&&(this.nickname=t.data.text)},loadData:function(){var e=this;this.uid&&!this.nickname&&t.database().collection("uni-id-users").field("nickname").where({_id:this.uid}).get({getOne:!0}).then((function(t){t.result&&t.result.data&&(e.nickname=t.result.data.nickname),console.log("load user nickname",t)}))}}};e.default=i}).call(this,a("a9ff")["default"])},aa66:function(t,e,a){"use strict";a.r(e);var i=a("972a"),n=a("3c9c");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);var s=a("f0c5"),l=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"02d6d86c",null,!1,i["a"],void 0);e["default"]=l.exports},cd9e:function(t,e,a){var i=a("4111");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("81a08d9e",i,!0,{sourceMap:!1,shadowMode:!1})},e0656:function(t,e,a){"use strict";(function(t){a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("2909")),o=i(a("53ca"));a("d3b7"),a("14d9"),a("a434"),a("ac1f"),a("e9c4"),a("b64b"),a("fb6a"),a("c975");var s={load:"load",error:"error"},l={add:"add",replace:"replace"},r=["pageCurrent","pageSize","collection","action","field","getcount","orderby","where"],c={data:function(){return{loading:!1,listData:this.getone?{}:[],paginationInternal:{current:this.pageCurrent,size:this.pageSize,count:0},errorMessage:""}},created:function(){var e=this;this.collection&&(this.db=t.database(),this.dbCmd=this.db.command),this._isEnded=!1,this.$watch((function(){var t=[];return r.forEach((function(a){t.push(e[a])})),t}),(function(t,a){e.paginationInternal.pageSize=e.pageSize;for(var i=!1,n=2;n<t.length;n++)if(t[n]!=a[n]){i=!0;break}i&&(e.clear(),e.reset()),t[0]!=a[0]&&(e.paginationInternal.current=e.pageCurrent),e._execLoadData()}))},beforeDestroy:function(){},methods:{loadData:function(t,e){var a=null;"object"===(0,o.default)(t)?(t.clear&&(this.clear(),this.reset()),void 0!==t.current&&(this.paginationInternal.current=t.current),"function"===typeof e&&(a=e)):"function"===typeof t&&(a=t),this._execLoadData(a)},loadMore:function(){console.log("loadMore"),this._isEnded||this._execLoadData()},refresh:function(){this.clear(),this._execLoadData()},clear:function(){this._isEnded=!1,this.listData=[]},reset:function(){this.paginationInternal.current=1},remove:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.action,n=a.callback,o=a.confirmTitle,s=a.confirmContent;t&&t.length&&uni.showModal({title:o||"提示",content:s||"是否删除该数据",showCancel:!0,success:function(a){a.confirm&&e._execRemove(t,i,n)}})},_execLoadData:function(t){var e=this;this.loading||(this.loading=!0,this.errorMessage="",this._getExec().then((function(a){e.loading=!1;var i=a.result,o=i.data,r=i.count;if(e._isEnded=o.length<e.pageSize,t&&t(o,e._isEnded),e._dispatchEvent(s.load,o),e.getone)e.listData=o.length?o[0]:void 0;else if(e.pageData===l.add){var c;(c=e.listData).push.apply(c,(0,n.default)(o)),e.listData.length&&e.paginationInternal.current++}else e.pageData===l.replace&&(e.listData=o,e.paginationInternal.count=r)})).catch((function(a){e.loading=!1,e.errorMessage=a,t&&t(),e.$emit(s.error,a)})))},_getExec:function(){var t=this.db;this.action&&(t=t.action(this.action)),t=t.collection(this.collection),this.where&&Object.keys(this.where).length&&(t=t.where(this.where)),this.field&&(t=t.field(this.field)),this.orderby&&(t=t.orderBy(this.orderby));var e=this.paginationInternal,a=e.current,i=e.size;return t=t.skip(i*(a-1)).limit(i).get({getCount:this.getcount}),t},_execRemove:function(t,e,a){var i=this;if(this.collection&&t){var n=Array.isArray(t)?t:[t];if(n.length){uni.showLoading({mask:!0});var o=this.db;e&&(o=o.action(e)),o.collection(this.collection).where({_id:dbCmd.in(n)}).remove().then((function(t){a&&a(t.result),i.pageData===l.replace?i.refresh():i.removeData(n)})).catch((function(t){uni.showModal({content:t.message,showCancel:!1})})).finally((function(){uni.hideLoading()}))}}},removeData:function(t){for(var e=t.slice(0),a=this.listData,i=a.length-1;i>=0;i--){var n=e.indexOf(a[i]._id);n>=0&&(a.splice(i,1),e.splice(n,1))}},_dispatchEvent:function(t,e){this._changeDataFunction?this._changeDataFunction(e,this._isEnded):this.$emit(t,e,this._isEnded)}}};e.default=c}).call(this,a("a9ff")["default"])},e280:function(t,e,a){"use strict";a.r(e);var i=a("5652"),n=a("9a34");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("efad");var s=a("f0c5"),l=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"9c321dd6",null,!1,i["a"],void 0);e["default"]=l.exports},eab6:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".uni-app--showleftwindow .uni-container .uni-forms[data-v-9c321dd6]{width:100%;max-width:100%}.uni-easyinput[data-v-9c321dd6]{max-width:%?920?%}",""]),t.exports=e},efad:function(t,e,a){"use strict";var i=a("1fb8"),n=a.n(i);n.a},fc1a:function(t,e,a){"use strict";var i=a("cd9e"),n=a.n(i);n.a}}]);